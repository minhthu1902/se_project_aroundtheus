!function(){"use strict";class e{constructor(e,t,r,s,o){let{name:i,link:n,_id:a,isLiked:l}=e;this._name=i,this._link=n,this._id=a,this._isLiked=l,this._handleImagePreview=r,this._cardSelector=t,this._handleDeleteClick=s,this._handleLikeClick=o}getId(){return this._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}updateLikes(e){this._isLiked=!e,this._handleLikeIcon()}_handleLikeIcon(){this._isLiked?this._likeButton.classList.add("card__like-button-active"):this._likeButton.classList.remove("card__like-button-active")}handleDeleteCard(){return this._cardElement.remove(),this._cardElement=null,this._cardElement}_renderCard(){this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._trashButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImagePreview({name:this._name,link:this._link})}))}getNewCard(){return this._cardElement=this._getTemplate(),this._cardElement.dataset.id=this._id,this._cardElement.dataset.id=this._id,this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._handleLikeIcon(),this._cardImage=this._cardElement.querySelector(".card__image"),this._trashButton=this._cardElement.querySelector(".card__delete-button"),this._renderCard(),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formElement=e,this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this.inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._ButtonElement=this._formElement.querySelector(this._submitButtonSelector)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e,t){const r=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),r.textContent=t,r.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButtons=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButtons.classList.add(this._inactiveButtonClass),void(this._submitButtons.disabled=!0);this._submitButtons.classList.remove(this._inactiveButtonClass),this._submitButtons.disabled=!1}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{e.value="",this._hideInputError(e)}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class r{constructor(e){let{modalSelector:t}=e;console.log(this._popupElement),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){console.log(this),this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close"))&&this.close()}))}}class s extends r{constructor(e,t){super({modalSelector:e}),this._form=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._form.querySelectorAll(".modal__input"),this._modalButton=this._popupElement.querySelector(".modal__button")}close(){this._form.reset(),super.close()}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setSubmit(){this._formSubmit=handleFormSubmit}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._modalButton?this._modalButton.textContent=e?t:this._modalButton.dataset.originalText||"Save":console.error("Submit button not found.")}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}document.querySelector(".cards__list");const o=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-button"),n=document.querySelector("#profile-title-input"),a=document.querySelector("#profile-description-input"),l=document.querySelector("#profile-edit-modal"),c=(l.querySelector(".modal__close"),l.querySelector(".modal__form"),document.querySelector("#add-card-form")),d=(document.querySelector(".modal__close"),document.querySelector("#preview-image"),document.querySelector("#preview-title"),document.querySelector("#preview-modal-close-button"),document.querySelector("#card-template").content.querySelector(".card"),document.querySelector("#edit-profile-form")),h=document.querySelector(".profile__image-edit-button"),u=document.querySelector("#avatar-modal").querySelector("#avatar-modal-form"),_=(document.querySelector(".card__delete-button"),document.querySelector("#delete-modal-form"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"}),m=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}async getProfile(){return fetch(this._baseUrl+"/users/me/",{method:"GET",headers:{authorization:this._headers.authorization}}).then((e=>e.ok?e.json():(console.log("Error"),Promise.reject(`Error : ${e.status}`)))).then((e=>(console.log(e),e))).catch((e=>console.error(e)))}async patchProfileAvatar(e){return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status} + ${e.message}`))).then((e=>e)).catch((e=>{console.error(e)}))}async patchProfile(e,t){return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.error(e)}))}async getInitialCards(){return fetch(this._baseUrl+"/cards",{method:"GET",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"}}).then((e=>e.ok?e.json():Promise.reject(`Error getting initial cards: ${e.status}`)))}async postCards(e,t){return console.log("Sending data:",{name:e,link:t}),fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>(console.log("Card created successfully:",e),e))).catch((e=>{console.error("POST Card Error:",e)}))}async deleteCard(e){return fetch(this._baseUrl+`/cards/${e}`,{method:"DELETE",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>{console.log(e)}))}async cardLikeStatus(e,t){try{const r=await fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP Error: ${r.status}`);return r.json()}catch(e){throw console.error(`Failed to update like status: ${e.message}`),e}}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"a93eae64-e670-4bc7-86e7-6fe2158b62a7"}});m.getInitialCards().then((e=>{S.renderItems(e)})).catch((e=>{console.error("Error fetching cards:",e)})),m.getProfile().then((e=>{console.log("Profile data fetched:",e),p.setUserInfo(e.name,e.about),p.setUserAvatar(e.avatar)})).catch((e=>console.error("Error fetching profile:",e)));const p=new class{constructor(e){let{profileTitleSelector:t,profileDescriptionSelector:r,profileAvatarSelector:s}=e;this._profileTitleElement=document.querySelector(t),this._profileDescriptionElement=document.querySelector(r),this._profileAvatarElement=document.querySelector(s)}getUserInfo(){return{profileTitle:this._profileTitleElement.textContent,profileDescription:this._profileDescriptionElement.textContent,avatar:this._profileAvatarElement.src}}setUserInfo(e,t){this._profileTitleElement.textContent=e,this._profileDescriptionElement.textContent=t}setUserAvatar(e){this._profileAvatarElement&&(this._profileAvatarElement.src=e)}}({profileTitleSelector:".profile__title",profileDescriptionSelector:".profile__description",profileAvatarSelector:".profile__image"}),E=new s("#add-card-modal",(function(e){let{name:t,url:r}=e;E.setLoading(!0,"Saving..."),m.postCards(t,r).then((e=>{const t=k(e);S.addItem(t),E.close()})).finally((()=>{E.setLoading(!1)})).catch((e=>{console.error(e)}))}));E.setEventListeners();const f=new s("#profile-edit-modal",(function(e){let{name:t,description:r}=e;f.setLoading(!0,"Saving..."),m.patchProfile(t,r).then((e=>{console.log(e),p.setUserInfo(e.name,e.about),f.close()})).finally((()=>{f.setLoading(!1)})).catch((e=>{console.error(e)}))}));f.setEventListeners();const S=new class{constructor(e,t){let{items:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({items:[],renderer:e=>{const t=k(e);S.addItem(t)}},".cards__list"),v=new s("#avatar-modal",(function(e){let{avatarUrl:t}=e;console.log(t),v.setLoading(!0,"Saving..."),m.patchProfileAvatar(t).then((e=>{p.setUserAvatar(e.avatar),v.close()})).finally((()=>{v.setLoading(!1)})).catch((e=>{console.error(e)}))}));v.setEventListeners();const y=new class extends r{constructor(e){let{modalSelector:t}=e;super({modalSelector:t}),this._photoElement=this._popupElement.querySelector(".modal__preview-image"),this._title=this._popupElement.querySelector(".modal__preview-title")}open(e,t){this._photoElement.src=t,this._photoElement.alt=e,this._title.textContent=e,super.open()}}({modalSelector:"#preview-image-modal"});y.setEventListeners();const g=new class extends r{constructor(e,t){super({modalSelector:e}),this._form=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._modalButton=this._form.querySelector(".modal__button")}_removeCard(e){e.remove(),e=null}setSubmit(e){this._handleFormSubmit=e}setLoading(e,t){this._modalButton.textContent=e?"Deleting...":t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}("#delete-modal",B);g.setEventListeners();const L=new t(c,_),b=new t(u,_),C=new t(d,_);function k(t){return new e(t,"#card-template",I,B,q).getNewCard()}function q(e){m.cardLikeStatus(e._id,e._isLiked).then((()=>{e.updateLikes(e._isLiked)})).catch((t=>{console.error("Failed to update card likes status",t),e.updateLikes(e._isLiked)}))}function I(e){y.open(e.name,e.link)}function B(e){g.open(),g.setSubmit((()=>{g.setLoading(!0,"Deleting..."),this._cardElement.dataset.id=this._id,m.deleteCard(e._id).then((()=>{console.log("Card deleted successfully"),e.handleDeleteCard(),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.setLoading(!1,"Yes")}))}))}C.enableValidation(),L.enableValidation(),b.enableValidation(),o.addEventListener("click",(()=>{const e=p.getUserInfo();C.resetValidation(),n.value=e.profileTitle,a.value=e.profileDescription,f.open()})),i.addEventListener("click",(()=>{L.toggleButtonState(),E.open()})),h.addEventListener("click",(()=>{v.open(),b.toggleButtonState()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUtyQyxhQUMvQnZELEVBQXdCNUMsTUFBUXdJLEVBQUtwQyxtQkFDckNTLEVBQWlCbEcsTUFBTSxJQUd6QitCLEVBQWlCcEYsaUJBQWlCLFNBQVMsS0FDekMrSyxFQUFxQjFJLG9CQUNyQjBHLEVBQWExRixNQUFNLElBR3JCcUMsRUFBb0IxRixpQkFBaUIsU0FBUyxLQUM1Q21LLEVBQWdCOUcsT0FDaEIySCxFQUFvQjNJLG1CQUFtQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL3VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZH0sIGNhcmRTZWxlY3RvciwgXG4gIGhhbmRsZUltYWdlUHJldmlldyxcbiAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gIGhhbmRsZUxpa2VDbGljayxcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5faWQgPSBfaWRcbiAgICAgLy8gZ2V0dGluZyBpZFxuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlUHJldmlldyA9IGhhbmRsZUltYWdlUHJldmlldztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gIH1cblxuICBnZXRJZCgpe1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIHVwZGF0ZUxpa2VzKGlzTGlrZWQpe1xuICAgIHRoaXMuX2lzTGlrZWQgPSAhaXNMaWtlZDtcbiAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIC8vIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKTsgLy9wYXNzaW5nIGFwaSBmdW5jdGlvbiBmcm9tIGluZGV4IGZpbGUsIHRoaXMgd2lsbCBtYWtlIG1vcmUgcmVxdWVzdHMgdGhhbiBleHBlY3RlZC5cbiAgICBpZih0aGlzLl9pc0xpa2VkKXtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b24tYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9yZW5kZXJDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgLy8gdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKTtcbiAgICB9KTtcbiAgICAvLyB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIC8vICAgdGhpcy5oYW5kbGVEZWxldGVDYXJkKCk7IC8vdGhpcyB3b24ndCB3b3JrIGJlY2F1c2UgaXQncyBub3QgYSBtZXRob2Qgb2YgdGhlIENhcmQgY2xhc3MgYW5kIGRlbGV0ZSB0aGUgY2FyZCBiZWZvcmUgdGhlIGNvbmZpcm1hdGlvbiBtb2RhbCBpcyBzaG93blxuICAgIC8vIH0pO1xuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzKTtcbiAgICB9KSBcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlUHJldmlldyh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXROZXdDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5kYXRhc2V0LmlkID0gdGhpcy5faWQ7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQuZGF0YXNldC5pZCA9IHRoaXMuX2lkO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3RyYXNoQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuICAgIHRoaXMuX3JlbmRlckNhcmQoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBvcHRpb25zLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gb3B0aW9ucy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fQnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTsgLy9hbGwgaW5wdXRsZW1lbnRzIGFyZSB2YWxpZFxuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTsgLy9nZXQgdmFsaWRhdGlvbiBtZXNzYWdlXG5cbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIC8vIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpOyAvL2FkZCBlcnJvciBjbGFzcyBhbmQgZGlzcGxheSBlcnJvciBtZXNzYWdlXG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjsgLy9yZXNldCBlcnJvclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxuICAgIF07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9ucyA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucy5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucy5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbnMuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25zLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG4vL2VuYWJsaW5nIHZhbGlkYXRpb24gYnkgY2FsbGluZyBlbmFibGVWYWxpZGF0aW9uKClcbi8vIHBhc3MgYWxsIHRoZSBzZXR0aW5ncyBvbiBjYWxsXG4vLyBsb29rIGZvciBpbnB1dCBpcyBub3QgdmFsaWRcbi8vIGdldCB2YWxpZGF0aW9uIG1lc3NhZ2Vcbi8vYWRkIGVycm9yIGNsYXNzIHRvIGlucHV0XG4vLyBkaXNwbGF5IGVycm9yIG1lc3NhZ2Vcbi8vZGlzYWJsZSBidXR0b25cbi8vIGlmIGFsbCBpbnB1dHMgYXJlIHZhbGlkICwgZW5hYmxlIGJ1dHRvblxuLy8gcmVzZXQgZXJyb3IgbWVzc2FnZVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7bW9kYWxTZWxlY3Rvcn0pIHtcbiAgICAvLyB0aGlzLl9tb2RhbFNlbGVjdG9yID0gbW9kYWxTZWxlY3RvcjtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wb3B1cEVsZW1lbnQpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICAvL29wZW4gcG9wdXBcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy8gY29uc29sZS5sb2codGhpcyk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGFkZCBhIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIGljb25cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBlLnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50IHx8XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICAvL21vZGFsU2VsZWN0b3IgY2FsbCBiYWNrIGZuIHdoZW4gcG9wdXBXaXRoRm9ybSBjYWxscyBhbmQgdGhlIGZvcm0gc3VibWl0IGV2ZW50IG9uXG4gICAgc3VwZXIoeyBtb2RhbFNlbGVjdG9yIH0pOyAvL2FkZC1jYXJkLW1vZGFsXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5fbW9kYWxCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpOyAvLyB0byByZXNldCB0aGUgZm9ybSBvbmNlIHRoZSBwb3B1cCBpcyBjbG9zZWRcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuICBzZXRTdWJtaXQoKSB7XG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xuICAgIGlmICh0aGlzLl9tb2RhbEJ1dHRvbikge1xuICAgICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgICB0aGlzLl9tb2RhbEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbW9kYWxCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9tb2RhbEJ1dHRvbi5kYXRhc2V0Lm9yaWdpbmFsVGV4dCB8fCBcIlNhdmVcIjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIlN1Ym1pdCBidXR0b24gbm90IGZvdW5kLlwiKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvLyBnZXROZXdGb3JtKCkge1xuICAvLyAgIHJldHVybiB0aGlzLl9mb3JtO1xuICAvLyB9XG59XG4iLCJpbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gICAgYWx0OiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICAgIGFsdDogXCJMYWtlIExvdWlzZVwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICBhbHQ6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICAgIGFsdDogXCJMYXRlbWFyXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gICAgYWx0OiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gICAgYWx0OiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY2FyZERhdGEgPSB7XG4gIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbn07XG5cbi8vdGVtcGxhdGVzIGFuZCBidXR0b25cbmV4cG9ydCBjb25zdCBjYXJkc0xpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG4vL2lucHV0c1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQ2xvc2VNb2RhbCA9XG4gIHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4vLyBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuLy8gY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4vLyBQcm9maWxlIGFkZCBjYXJkIGJ1dHRvblxuLy8gY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XG4vLyBjb25zdCBjYXJkVGl0bGVJbnB1dCA9IGFkZENhcmRFZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGl0bGUtaW5wdXRcIik7XG4vLyBjb25zdCBjYXJkVXJsSW5wdXQgPSBhZGRDYXJkRWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNjYXJkLXVybC1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWxDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG4vL1ByZXZpZXcgSW1hZ2Vcbi8vIGNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy10aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJldmlldy1tb2RhbC1jbG9zZS1idXR0b25cIlxuKTtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XG4vL2NvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtZm9ybVwiKTtcblxuLy9hdmF0YXJcbmV4cG9ydCBjb25zdCBhdmF0YXJQaWN0dXJlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0TW9kYWw9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRGb3JtID0gYXZhdGFyRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsLWZvcm1cIik7XG5cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogIERlbGV0ZSBjYXJkIGNvbmZpcm1hdGlvbiBmb3JtICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBkZWxldGVCdXR0b25TdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbC1mb3JtXCIpO1xuXG4vL1ZhbGlkYXRpb24gb3B0aW9uc1xuZXhwb3J0IGNvbnN0IG9wdGlvbnMgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGF1dGhvcml6YXRpb25Db2RlID0gXCJhOTNlYWU2NC1lNjcwLTRiYzctODZlNy02ZmUyMTU4YjYyYTdcIjtcblxuIiwiaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5pbXBvcnQgdXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgYXV0aG9yaXphdGlvbkNvZGUsXG4gIGF2YXRhclBpY3R1cmVCdXR0b24sXG4gIGF2YXRhckVkaXRGb3JtLFxuICBpbml0aWFsQ2FyZHMsXG4gIGNhcmREYXRhLFxuICBjYXJkc0xpc3RFbCxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcbiAgYWRkQ2FyZEVkaXRGb3JtLFxuICBhZGRDYXJkTW9kYWxDbG9zZUJ1dHRvbixcbiAgZGVsZXRlQnV0dG9uU3VibWl0LFxuICBlZGl0UHJvZmlsZUZvcm0sXG4gIHByZXZpZXdJbWFnZU1vZGFsQ2xvc2VCdXR0b24sXG4gIG9wdGlvbnMsXG4gIGNhcmRUZW1wbGF0ZSxcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cblxuLyotLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgICBBcGkgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0qL1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IGF1dGhvcml6YXRpb25Db2RlLFxuICB9LFxufSk7XG5cblxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGNhcmRzKSA9PiB7XG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2FyZHM6XCIsIGVycik7XG59KTtcblxuYXBpLmdldFByb2ZpbGUoKS50aGVuKChkYXRhKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdQcm9maWxlIGRhdGEgZmV0Y2hlZDonLCBkYXRhKTtcbiAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dCk7XG4gIHByb2ZpbGVVc2VySW5mby5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKTtcbn0pXG4uY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZTonLCBlcnIpKTtcblxuLy9wb3AgdXAgd2l0aCBmb3JtXG5jb25zdCBwcm9maWxlVXNlckluZm8gPSBuZXcgdXNlckluZm8oe1xuICBwcm9maWxlVGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIlxufSk7XG5cbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKCBcIiNhZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCk7XG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7XG5lZGl0UHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbXMpID0+IHtcbiAgY29uc3QgbmV3Q2FyZCA9IGdldENhcmQoaXRlbXMpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xufTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgeyBpdGVtczogW10sIHJlbmRlcmVyOiBjcmVhdGVDYXJkIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhci1tb2RhbFwiLCBoYW5kbGVBdmF0YXJTdWJtaXQpO1xuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgbW9kYWxTZWxlY3RvcjpcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIsfSk7XG5wcmV2aWV3SW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBkZWxldGVTdWJtaXRDb25maXJtTW9kYWwgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI2RlbGV0ZS1tb2RhbFwiLCBoYW5kbGVDYXJkRGVsZXRlU3VibWl0KTtcbmRlbGV0ZVN1Ym1pdENvbmZpcm1Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICBWYWxpZGF0aW9uICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihhZGRDYXJkRWRpdEZvcm0sIG9wdGlvbnMpO1xuXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoYXZhdGFyRWRpdEZvcm0sIG9wdGlvbnMpO1xuXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGVkaXRQcm9maWxlRm9ybSwgb3B0aW9ucyk7IFxuXG4vL0luaXRpYWxpemF0aW9uXG5wcm9maWxlRWRpdE1vZGFsRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbi8vIGRlbGV0ZUJ1dHRvblN1Ym1pdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgQWRkIGV2ZW50IGxpc3RlbmVyICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgdXNlciA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRWRpdE1vZGFsRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VyLnByb2ZpbGVUaXRsZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyLnByb2ZpbGVEZXNjcmlwdGlvbjtcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBhZGRDYXJkTW9kYWwub3BlbigpO1xufSk7XG5cbmF2YXRhclBpY3R1cmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xufSk7XG5cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICBmdW5jdGlvbiAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHtuYW1lLCBkZXNjcmlwdGlvbn0pIHsvL25hbWUgYW5kIGRlc2NyaXB0aW9uIGhhdmUgdG8gbWF0Y2ggdGhlIG5hbWUgb2YgcHJvZmlsZSBlZGl0IGZvcm0gaW5wdXQgbmFtZVxuICBlZGl0UHJvZmlsZU1vZGFsLnNldExvYWRpbmcodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XG4gIGFwaS5wYXRjaFByb2ZpbGUobmFtZSwgZGVzY3JpcHRpb24pLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgY29uc29sZS5sb2codXNlckRhdGEpO1xuICAgIHByb2ZpbGVVc2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XG4gICAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xuICB9KS5maW5hbGx5KCgpID0+IHsgXG4gICAgZWRpdFByb2ZpbGVNb2RhbC5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSlcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoe25hbWUsIHVybH0pIHtcbiAgYWRkQ2FyZE1vZGFsLnNldExvYWRpbmcodHJ1ZSxcIlNhdmluZy4uLlwiKTtcbiAgYXBpLnBvc3RDYXJkcyhuYW1lLCB1cmwpLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coY2FyZERhdGEpO1xuICAgIGNvbnN0IGNhcmQgPSBnZXRDYXJkKGNhcmREYXRhKTtcbiAgICAvLyBhZGRDYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG4gICAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XG5cbiAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgYWRkQ2FyZE1vZGFsLnNldExvYWRpbmcoZmFsc2UpO1xuICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KVxuXG59XG5cbi8vIGZ1bmN0aW9uIGdldENhcmQgKGNhcmREYXRhKSB7XG4vLyAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VQcmV2aWV3KTsgLy9jYWxsIG91dCBDYXJkIGNsYXNzIHdpdGggY29ycmVzcG9uZGluZyBhcmd1bWVudCBpbiBDYXJkIGNsYXNzIGNvbnN0cnVjdG9yXG4vLyAgIHJldHVybiBjYXJkRWxlbWVudC5nZXROZXdDYXJkKCk7XG4vLyB9XG5cbiBcbmZ1bmN0aW9uIGdldENhcmQoaXRlbXMpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcbiAgICBpdGVtcyxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VQcmV2aWV3LFxuICAgIGhhbmRsZUNhcmREZWxldGVTdWJtaXQsXG4gICAgaGFuZGxlTGlrZUNsaWNrXG4gICk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldE5ld0NhcmQoKTtcbn1cblxuXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soaXRlbXMpIHtcbiAgLy90b2dnbGUgdGhlIGxpa2Ugc3RhdHVzXG4gIGFwaS5jYXJkTGlrZVN0YXR1cyhpdGVtcy5faWQsaXRlbXMuX2lzTGlrZWQpLnRoZW4oKCkgPT4ge1xuICAgIGl0ZW1zLnVwZGF0ZUxpa2VzKGl0ZW1zLl9pc0xpa2VkKTtcbiAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIGNhcmQgbGlrZXMgc3RhdHVzXCIsIGVycik7XG4gICAgaXRlbXMudXBkYXRlTGlrZXMoaXRlbXMuX2lzTGlrZWQpOyAvL3JldmVydCB0aGUgbGlrZSBzdGF0dXMgaWYgZmFpbGVkIHRvIHVwZGF0ZSBhcGlcbiAgfSk7XG59XG5cbi8vIGZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhpdGVtcykge1xuLy8gICBjb25zdCBpc0xpa2VkID0gIWl0ZW1zLmlzTGlrZWQ7XG4vLyAgIGlmIChpc0xpa2VkID09PSB0cnVlKSB7XG4vLyAgICAgYXBpLmNhcmRMaWtlU3RhdHVzKGl0ZW1zLl9pZCwgaXNMaWtlZCkudGhlbigoKSA9PiB7XG4vLyAgICAgICBpdGVtcy51cGRhdGVMaWtlcyh0cnVlKTtcbi8vICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4vLyAgICAgICBjb25zb2xlLmVycm9yKHJlcyk7XG4vLyAgICAgfSk7XG4vLyAgIH0gZWxzZSB7XG4vLyAgICAgYXBpLmNhcmRVbmxpa2VTdGF0dXMoaXRlbXMuX2lkKS50aGVuKCgpID0+IHtcbi8vICAgICAgIGl0ZW1zLnVwZGF0ZUxpa2VzKGZhbHNlKTsgXG4vLyAgIH0pLmNhdGNoKChlcnIpID0+IHtcbi8vICAgICBjb25zb2xlLmVycm9yKGVycik7XG4vLyAgIH0pO1xuLy8gICBjb25zb2xlLmxvZyhpdGVtcyk7XG4vLyAgIH1cbi8vIH1cblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KHsgYXZhdGFyVXJsIH0pe1xuICBjb25zb2xlLmxvZyhhdmF0YXJVcmwpO1xuICBlZGl0QXZhdGFyUG9wdXAuc2V0TG9hZGluZyh0cnVlLCBcIlNhdmluZy4uLlwiKTtcbiAgYXBpLnBhdGNoUHJvZmlsZUF2YXRhcihhdmF0YXJVcmwpXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJBdmF0YXIoZGF0YS5hdmF0YXIpO1xuICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xuICB9KVxuICAuZmluYWxseSgoKT0+e1xuICAgIGVkaXRBdmF0YXJQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgfSkuY2F0Y2goKGVycik9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZVByZXZpZXcoY2FyZCkge1xuICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKGNhcmQubmFtZSwgY2FyZC5saW5rKTtcbn0gLy8gaXQgbmVlZHMgbmFtZSBhbmQgbGluayB0byBkaXNwbGF5IGltYWdlIG9uIHByZXZpZXdcblxuLy9jcmVhdGUgYSBmdW5jdGlvbiB0aGF0IGhhbmRsZSBkZWxldGUgYnV0dG9uIG1vZGFsXG5mdW5jdGlvbiBoYW5kbGVDYXJkRGVsZXRlU3VibWl0KGl0ZW1zKXtcbiAgZGVsZXRlU3VibWl0Q29uZmlybU1vZGFsLm9wZW4oKTtcbiAgZGVsZXRlU3VibWl0Q29uZmlybU1vZGFsLnNldFN1Ym1pdCgoKT0+IHtcbiAgICBkZWxldGVTdWJtaXRDb25maXJtTW9kYWwuc2V0TG9hZGluZyh0cnVlLCBcIkRlbGV0aW5nLi4uXCIpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LmRhdGFzZXQuaWQgPSB0aGlzLl9pZDtcbiAgICBhcGkuZGVsZXRlQ2FyZChpdGVtcy5faWQpLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJDYXJkIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgaXRlbXMuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgZGVsZXRlU3VibWl0Q29uZmlybU1vZGFsLmNsb3NlKCk7XG4gICAgfSkuIGNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgIGRlbGV0ZVN1Ym1pdENvbmZpcm1Nb2RhbC5zZXRMb2FkaW5nKGZhbHNlLCBcIlllc1wiKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICAgIH1cbiAgICAvL3Byb2ZpbGUgYW5kIGF2YXRhciBcbiAgICBhc3luYyBnZXRQcm9maWxlKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lL1wiLCBcbiAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yIDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9KSBcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICAgIH1cblxuICAgIGFzeW5jIHBhdGNoUHJvZmlsZUF2YXRhcihuZXdMaW5rKSB7XG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lL2F2YXRhclwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYXZhdGFyOiBuZXdMaW5rLFxuICAgICAgICB9KSxcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfSArICR7cmVzLm1lc3NhZ2V9YCk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuLy91cGRhdGUgcHJvZmlsZSBpbmZvXG4gICAgYXN5bmMgcGF0Y2hQcm9maWxlKG5hbWVWYXIsIGJpb1Zhcikge1xuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogbmFtZVZhcixcbiAgICAgICAgICBhYm91dDogYmlvVmFyLFxuICAgICAgICB9KSxcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy9DQVJEIFJPVVRFU1xuICAgIC8vIGdldCBhbGwgY2FyZHNcbiAgICBhc3luYyBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzXCIsIFxuICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5vaykgXG4gICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciBnZXR0aW5nIGluaXRpYWwgY2FyZHM6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgLy9jcmVhdGUgbmV3IGNhcmRcbiAgICBhc3luYyBwb3N0Q2FyZHMobmFtZSwgbGluaykge1xuICAgICAgY29uc29sZS5sb2coJ1NlbmRpbmcgZGF0YTonLCB7IG5hbWUsIGxpbmsgfSk7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9KS4gdGhlbiAoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdDYXJkIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUE9TVCBDYXJkIEVycm9yOlwiLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlQ2FyZChjYXJkSUQpIHtcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgYC9jYXJkcy8ke2NhcmRJRH1gLCB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY2FyZExpa2VTdGF0dXMoY2FyZElELCBpc0xpa2VkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLCB7XG4gICAgICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gIFxuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gIFxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIGxpa2Ugc3RhdHVzOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICB0aHJvdyBlcnI7ICAvLyBSZXRocm93IHRvIGhhbmRsZSBpbiB0aGUgY2FsbGVyIGZ1bmN0aW9uXG4gICAgICB9XG4gICAgfVxuICBcblxuICAgIC8vIGFzeW5jIGNhcmRMaWtlU3RhdHVzKGNhcmRJRCwgaXNMaWtlZCkge1xuICAgIC8vICAgICByZXR1cm4gKGZldGNoKCB0aGlzLl9iYXNlVXJsICsgYC9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLFxuICAgIC8vICAgICAgICAge1xuICAgIC8vICAgICAgICAgICBtZXRob2Q6IGlzTGlrZWQgP1wiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgIC8vICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgLy8gICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5faGVhZGVycy5hdXRob3JpemF0aW9uLFxuICAgIC8vICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLCAgICAgICAgICAgICAgXG4gICAgLy8gICAgICAgICAgIH0sXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgIC8vICAgICAgICAgICBpZiAocmVzLm9rKSBcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAvLyAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBMaWtlIEVycm9yOiAgKyAke3Jlcy5zdGF0dXN9YCk7XG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAvLyAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlBVVCBMaWtlIEVycm9yOlwiLCBlcnIpO1xuICAgIC8vICAgICAgICAgfSlcbiAgICAvLyAgICAgICApO1xuICAgIC8vIH1cblxuICAvLyAgICAgYXN5bmMgY2FyZFVubGlrZVN0YXR1cyhjYXJkSWQpIHtcbiAgLy8gICAgICAgICByZXR1cm4gKGZldGNoXG4gIC8vICAgICAgICAgICAodGhpcy5fYmFzZVVybCArIGAvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCxcbiAgLy8gICAgICAgICAgICAge1xuICAvLyAgICAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgLy8gICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gIC8vICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9oZWFkZXJzLmF1dGhvcml6YXRpb24sXG4gIC8vICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgLy8gICAgICAgICAgICAgICB9LFxuICAvLyAgICAgICAgICAgICB9KVxuICAvLyAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gIC8vICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgXG4gIC8vICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgLy8gICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIC8vICAgICAgICAgICAgIH0pXG4gIC8vICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gIC8vICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRFTEVURSBVbmxpa2UgRXJyb3I6IFwiLCBlcnIpO1xuICAvLyAgICAgICAgICAgICB9KVxuICAvLyAgICAgICAgICAgKTtcbiAgLy8gICAgIH1cbiAgICAgICAgICAgIFxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHVzZXJJbmZvIHtcbiAgLy9wYXNzIGluIHNlbGVjdG9yJ3MgYXMgYXJndW1lbnRcbiAgY29uc3RydWN0b3IoeyBcbiAgICBwcm9maWxlVGl0bGVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IsXG4gICAgcHJvZmlsZUF2YXRhclNlbGVjdG9yIH0pIFxuICB7XG4gICAgdGhpcy5fcHJvZmlsZVRpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZVRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyU2VsZWN0b3IpO1xuXG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgLy9vYmplY3Qgd2l0aCB1c2VyIGluZm9cbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZVRpdGxlOiB0aGlzLl9wcm9maWxlVGl0bGVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9wcm9maWxlQXZhdGFyRWxlbWVudC5zcmMsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHRoaXMuX3Byb2ZpbGVUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xuICAgIGlmICh0aGlzLl9wcm9maWxlQXZhdGFyRWxlbWVudCkge1xuICAgICAgdGhpcy5fcHJvZmlsZUF2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtczsgLy9pdGVtIHRoYXQgd2FudHMgdG8gY29udmVydCB0byBodG1sXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy90YWtlIGRhdGEgYW5kIGNvbnZlcnQgdG8gaHRtbFxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpdGVtcy5mb3JFYWNoKHRoaXMuX3JlbmRlcmVyKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpOyAvLyBoYW5kbGUgcmVuZGVyaW5nIG9mIHRoZSBjYXJkc1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9waG90b0VsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCJcbiAgICApO1xuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICAvLyBhZGQgaW1hZ2UgdG8gdGhlIHBvcHVwIGFuZCBpbWFnZXMgY29ycmVzcG9uZGluZyB0byBjYXB0aW9uXG4gICAgdGhpcy5fcGhvdG9FbGVtZW50LnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcGhvdG9FbGVtZW50LmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XG4gICAgLy8gdGhpcy5fbW9kYWxTZWxlY3RvciA9IG1vZGFsU2VsZWN0b3I7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX21vZGFsQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5cbiAgfVxuXG4gIF9yZW1vdmVDYXJkKGNhcmQpIHtcbiAgICBjYXJkLnJlbW92ZSgpO1xuICAgIGNhcmQgPSBudWxsO1xuICB9XG4gIHNldFN1Ym1pdChoYW5kbGVTdWJtaXQpIHtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICB9XG5cbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIHRleHQpIHtcbiAgICBpZihpc0xvYWRpbmcpe1xuICAgICAgdGhpcy5fbW9kYWxCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21vZGFsQnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VQcmV2aWV3IiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2hhbmRsZUltYWdlUHJldmlldyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiZ2V0SWQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidXBkYXRlTGlrZXMiLCJfaGFuZGxlTGlrZUljb24iLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJfcmVuZGVyQ2FyZCIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RyYXNoQnV0dG9uIiwiZ2V0TmV3Q2FyZCIsImRhdGFzZXQiLCJpZCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIm9wdGlvbnMiLCJfZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9CdXR0b25FbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VFbCIsIl9pbnB1dEVsZW1lbnRzIiwiX3N1Ym1pdEJ1dHRvbnMiLCJmb3JFYWNoIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsImRpc2FibGVkIiwicmVzZXRWYWxpZGF0aW9uIiwidmFsdWUiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJtb2RhbFNlbGVjdG9yIiwiY29uc29sZSIsImxvZyIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2Zvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfbW9kYWxCdXR0b24iLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJzZXRTdWJtaXQiLCJfZm9ybVN1Ym1pdCIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9yaWdpbmFsVGV4dCIsImVycm9yIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVFZGl0TW9kYWwiLCJhZGRDYXJkRWRpdEZvcm0iLCJlZGl0UHJvZmlsZUZvcm0iLCJhdmF0YXJQaWN0dXJlQnV0dG9uIiwiYXZhdGFyRWRpdEZvcm0iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRQcm9maWxlIiwiZmV0Y2giLCJtZXRob2QiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJyZXN1bHQiLCJjYXRjaCIsImVyciIsInBhdGNoUHJvZmlsZUF2YXRhciIsIm5ld0xpbmsiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsIm1lc3NhZ2UiLCJwYXRjaFByb2ZpbGUiLCJuYW1lVmFyIiwiYmlvVmFyIiwiYWJvdXQiLCJnZXRJbml0aWFsQ2FyZHMiLCJwb3N0Q2FyZHMiLCJkZWxldGVDYXJkIiwiY2FyZElEIiwiY2FyZExpa2VTdGF0dXMiLCJFcnJvciIsImNhcmRzIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJJdGVtcyIsInByb2ZpbGVVc2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsInByb2ZpbGVUaXRsZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJwcm9maWxlQXZhdGFyU2VsZWN0b3IiLCJfcHJvZmlsZVRpdGxlRWxlbWVudCIsIl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50IiwiX3Byb2ZpbGVBdmF0YXJFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJhZGRDYXJkTW9kYWwiLCJfcmVmMiIsInVybCIsImNhcmREYXRhIiwiY2FyZCIsImdldENhcmQiLCJhZGRJdGVtIiwiZmluYWxseSIsImVkaXRQcm9maWxlTW9kYWwiLCJkZXNjcmlwdGlvbiIsInVzZXJEYXRhIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwibmV3Q2FyZCIsImVkaXRBdmF0YXJQb3B1cCIsIl9yZWYzIiwiYXZhdGFyVXJsIiwicHJldmlld0ltYWdlTW9kYWwiLCJfcGhvdG9FbGVtZW50IiwiX3RpdGxlIiwiZGVsZXRlU3VibWl0Q29uZmlybU1vZGFsIiwiX3JlbW92ZUNhcmQiLCJoYW5kbGVTdWJtaXQiLCJ0ZXh0IiwiZXZ0IiwiaGFuZGxlQ2FyZERlbGV0ZVN1Ym1pdCIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsInByb2ZpbGVFZGl0TW9kYWxGb3JtVmFsaWRhdG9yIiwidXNlciJdLCJzb3VyY2VSb290IjoiIn0=